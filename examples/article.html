<html>
<head>
<style>
  body { max-width: 720px; margin: 40px auto; padding: 0 20px; font-family: Georgia, serif; color: #1a1a1a; line-height: 1.7; background: #fafafa; }
  h1 { font-size: 28px; margin-bottom: 4px; }
  .meta { color: #666; font-size: 14px; margin-bottom: 24px; border-bottom: 1px solid #ddd; padding-bottom: 12px; }
  h2 { font-size: 20px; margin-top: 32px; color: #222; }
  p { margin: 12px 0; }
  code { background: #f0f0f0; padding: 2px 6px; border-radius: 3px; font-size: 14px; }
  pre { background: #2d2d2d; color: #f8f8f2; padding: 16px; border-radius: 4px; overflow-x: auto; font-size: 14px; line-height: 1.5; }
  blockquote { border-left: 3px solid #2b6cb0; margin: 16px 0; padding: 8px 16px; color: #555; background: #f0f4f8; }
  table { border-collapse: collapse; width: 100%; margin: 16px 0; }
  th, td { border: 1px solid #ddd; padding: 8px 12px; text-align: left; }
  th { background-color: #f5f5f5; }
  .tag { display: inline-block; background: #e2e8f0; color: #2d3748; padding: 2px 8px; border-radius: 3px; font-size: 12px; margin-right: 4px; }
</style>
</head>
<body>
  <h1>Building a Lightweight HTML Renderer</h1>
  <div class="meta">
    <span class="tag">Rust</span>
    <span class="tag">FFI</span>
    <span class="tag">Rendering</span>
    &mdash; February 2026
  </div>

  <p>
    I've been working on Rust bindings for litehtml, a lightweight C++ HTML/CSS
    rendering engine. It handles standard web content well &mdash; tables, floats,
    inline layout, gradients, fonts &mdash; without the overhead of a full browser.
  </p>

  <h2>Architecture</h2>
  <p>
    The setup is a two-crate workspace. <code>litehtml-sys</code> handles the FFI:
    a thin C wrapper around the C++ API, compiled via <code>cc</code>, with bindings
    generated by <code>bindgen</code>. The safe <code>litehtml</code> crate sits on
    top with a <code>DocumentContainer</code> trait that mirrors the 29 virtual methods
    the engine expects.
  </p>

  <blockquote>
    Every FFI callback is wrapped in <code>catch_unwind</code> &mdash; a Rust panic
    unwinding through C++ frames is undefined behavior.
  </blockquote>

  <h2>Performance</h2>
  <table>
    <tr><th>Operation</th><th>Time</th></tr>
    <tr><td>Parse + layout (600px wide email)</td><td>~8 ms</td></tr>
    <tr><td>Rasterize to RGBA</td><td>~12 ms</td></tr>
    <tr><td>Total per frame</td><td>~20 ms</td></tr>
  </table>

  <h2>What works</h2>
  <p>
    Tables, floats, inline layout, borders, gradients, rounded corners, font shaping
    via cosmic-text, image decoding, clip stacks. Enough for email and static content.
  </p>

  <p>
    What doesn't: flexbox, grid, JavaScript, anything that requires a full browser
    engine. That's fine &mdash; if you need those, use a real browser. This is for
    the 90% of HTML that's just styled text and tables.
  </p>

  <pre>let pixels = render_to_rgba("&lt;p&gt;Hello&lt;/p&gt;", 600, 400);</pre>
</body>
</html>
